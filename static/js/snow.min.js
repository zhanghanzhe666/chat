/** @license
 * DHTML Snowstorm! JavaScript-based snow for web pages
 * Making it snow on the internets since 2003. You're welcome.
 * -----------------------------------------------------------
 * Version 1.44.20131208 (Previous rev: 1.44.20131125)
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License
 * http://schillmania.com/projects/snowstorm/license.txt
 */
var snowStorm=function(l,o){this.autoStart=!1,this.excludeMobile=!0,this.flakesMax=80,this.flakesMaxActive=40,this.animationInterval=33,this.useGPU=!0,this.className=null,this.excludeMobile=!0,this.flakeBottom=null,this.followMouse=!0,this.snowColor="#99ccff",this.snowCharacter="&bull;",this.snowStick=!0,this.targetElement=null,this.useMeltEffect=!0,this.useTwinkleEffect=!1,this.usePositionFixed=!1,this.usePixelPosition=!1,this.freezeOnBlur=!0,this.flakeLeftOffset=0,this.flakeRightOffset=0,this.flakeWidth=8,this.flakeHeight=8,this.vMaxX=5,this.vMaxY=4,this.zIndex=0;var n,a,s,r,f=this,t=navigator.userAgent.match(/msie/i),e=navigator.userAgent.match(/msie 6/i),i=navigator.userAgent.match(/mobile|opera m(ob|in)/i),m=t&&"BackCompat"===o.compatMode||e,h=null,u=null,c=null,d=null,v=null,p=null,y=null,k=1,g=!1,x=!1,w=function(){try{o.createElement("div").style.opacity="0.5"}catch(e){return!1}return!0}(),F=!1,b=o.createDocumentFragment();function E(e){var t=s.call(e),i=t.length;return a?(t[1]="on"+t[1],3<i&&t.pop()):3===i&&t.push(!1),t}function z(e,t){var i=e.shift(),s=[r[t]];a?i[s](e[0],e[1]):i[s].apply(i,e)}function H(e,t){return isNaN(t)&&(t=0),Math.random()*e+t}function M(){l.setTimeout(function(){f.start(!0)},20),f.events.remove(t?o:l,"mousemove",M)}return n=function(){var e;var t,i=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame||l.msRequestAnimationFrame||function(e){l.setTimeout(e,1e3/(f.animationInterval||20))};function s(e){return void 0!==t.style[e]?e:null}e=i?function(){return i.apply(l,arguments)}:null,t=o.createElement("div");var n={transform:{ie:s("-ms-transform"),moz:s("MozTransform"),opera:s("OTransform"),webkit:s("webkitTransform"),w3:s("transform"),prop:null},getAnimationFrame:e};return n.transform.prop=n.transform.w3||n.transform.moz||n.transform.webkit||n.transform.ie||n.transform.opera,t=null,n}(),this.timer=null,this.flakes=[],this.disabled=!1,this.active=!1,this.meltFrameCount=20,this.meltFrames=[],this.setXY=function(e,t,i){if(!e)return!1;f.usePixelPosition||x?(e.style.left=t-f.flakeWidth+"px",e.style.top=i-f.flakeHeight+"px"):m||f.flakeBottom?(e.style.right=100-t/h*100+"%",e.style.top=Math.min(i,v-f.flakeHeight)+"px"):(e.style.right=100-t/h*100+"%",e.style.bottom=100-i/c*100+"%")},this.events=(a=!l.addEventListener&&l.attachEvent,s=Array.prototype.slice,r={add:a?"attachEvent":"addEventListener",remove:a?"detachEvent":"removeEventListener"},{add:function(){z(E(arguments),"add")},remove:function(){z(E(arguments),"remove")}}),this.randomizeWind=function(){var e,t;if(t=H(f.vMaxX,.2),p=1===parseInt(H(2),10)?-1*t:t,y=H(f.vMaxY,.2),this.flakes)for(e=0;e<this.flakes.length;e++)this.flakes[e].active&&this.flakes[e].setVelocities()},this.scrollHandler=function(){var e;if(d=f.flakeBottom?0:parseInt(l.scrollY||o.documentElement.scrollTop||(m?o.body.scrollTop:0),10),isNaN(d)&&(d=0),!g&&!f.flakeBottom&&f.flakes)for(e=0;e<f.flakes.length;e++)0===f.flakes[e].active&&f.flakes[e].stick()},this.resizeHandler=function(){c=l.innerWidth||l.innerHeight?(h=l.innerWidth-16-f.flakeRightOffset,f.flakeBottom||l.innerHeight):(h=(o.documentElement.clientWidth||o.body.clientWidth||o.body.scrollWidth)-(t?0:8)-f.flakeRightOffset,f.flakeBottom||o.documentElement.clientHeight||o.body.clientHeight||o.body.scrollHeight),v=o.body.offsetHeight,u=parseInt(h/2,10)},this.resizeHandlerAlt=function(){h=f.targetElement.offsetWidth-f.flakeRightOffset,c=f.flakeBottom||f.targetElement.offsetHeight,u=parseInt(h/2,10),v=o.body.offsetHeight},this.freeze=function(){if(f.disabled)return!1;f.disabled=1,f.timer=null},this.resume=function(){if(!f.disabled)return!1;f.disabled=0,f.timerInit()},this.toggleSnow=function(){f.flakes.length?(f.active=!f.active,f.active?(f.show(),f.resume()):(f.stop(),f.freeze())):f.start()},this.stop=function(){var e;for(this.freeze(),e=0;e<this.flakes.length;e++)this.flakes[e].o.style.display="none";f.events.remove(l,"scroll",f.scrollHandler),f.events.remove(l,"resize",f.resizeHandler),f.freezeOnBlur&&(t?(f.events.remove(o,"focusout",f.freeze),f.events.remove(o,"focusin",f.resume)):(f.events.remove(l,"blur",f.freeze),f.events.remove(l,"focus",f.resume)))},this.show=function(){for(var e=0;e<this.flakes.length;e++)this.flakes[e].o.style.display="block"},this.SnowFlake=function(e,t,i){var s=this;this.type=e,this.x=t||parseInt(H(h-20),10),this.y=isNaN(i)?-H(c)-12:i,this.vX=null,this.vY=null,this.vAmpTypes=[1,1.2,1.4,1.6,1.8],this.vAmp=this.vAmpTypes[this.type]||1,this.melting=!1,this.meltFrameCount=f.meltFrameCount,this.meltFrames=f.meltFrames,this.meltFrame=0,this.twinkleFrame=0,this.active=1,this.fontSize=10+this.type/5*10,this.o=o.createElement("div"),this.o.innerHTML=f.snowCharacter,f.className&&this.o.setAttribute("class",f.className),this.o.style.color=f.snowColor,this.o.style.position=g?"fixed":"absolute",f.useGPU&&n.transform.prop&&(this.o.style[n.transform.prop]="translate3d(0px, 0px, 0px)"),this.o.style.width=f.flakeWidth+"px",this.o.style.height=f.flakeHeight+"px",this.o.style.fontFamily="arial,verdana",this.o.style.cursor="default",this.o.style.overflow="hidden",this.o.style.fontWeight="normal",this.o.style.zIndex=f.zIndex,b.appendChild(this.o),this.refresh=function(){if(isNaN(s.x)||isNaN(s.y))return!1;f.setXY(s.o,s.x,s.y)},this.stick=function(){m||f.targetElement!==o.documentElement&&f.targetElement!==o.body?s.o.style.top=c+d-f.flakeHeight+"px":f.flakeBottom?s.o.style.top=f.flakeBottom+"px":(s.o.style.display="none",s.o.style.bottom="0%",s.o.style.position="fixed",s.o.style.display="block")},this.vCheck=function(){0<=s.vX&&s.vX<.2?s.vX=.2:s.vX<0&&-.2<s.vX&&(s.vX=-.2),0<=s.vY&&s.vY<.2&&(s.vY=.2)},this.move=function(){var e=s.vX*k;s.x+=e,s.y+=s.vY*s.vAmp,s.x>=h||h-s.x<f.flakeWidth?s.x=0:e<0&&s.x-f.flakeLeftOffset<-f.flakeWidth&&(s.x=h-f.flakeWidth-1),s.refresh(),c+d-s.y+f.flakeHeight<f.flakeHeight?(s.active=0,f.snowStick?s.stick():s.recycle()):(f.useMeltEffect&&s.active&&s.type<3&&!s.melting&&.998<Math.random()&&(s.melting=!0,s.melt()),f.useTwinkleEffect&&(s.twinkleFrame<0?.97<Math.random()&&(s.twinkleFrame=parseInt(8*Math.random(),10)):(s.twinkleFrame--,w?s.o.style.opacity=s.twinkleFrame&&s.twinkleFrame%2==0?0:1:s.o.style.visibility=s.twinkleFrame&&s.twinkleFrame%2==0?"hidden":"visible")))},this.animate=function(){s.move()},this.setVelocities=function(){s.vX=p+H(.12*f.vMaxX,.1),s.vY=y+H(.12*f.vMaxY,.1)},this.setOpacity=function(e,t){if(!w)return!1;e.style.opacity=t},this.melt=function(){f.useMeltEffect&&s.melting&&s.meltFrame<s.meltFrameCount?(s.setOpacity(s.o,s.meltFrames[s.meltFrame]),s.o.style.fontSize=s.fontSize-s.fontSize*(s.meltFrame/s.meltFrameCount)+"px",s.o.style.lineHeight=f.flakeHeight+2+.75*f.flakeHeight*(s.meltFrame/s.meltFrameCount)+"px",s.meltFrame++):s.recycle()},this.recycle=function(){s.o.style.display="none",s.o.style.position=g?"fixed":"absolute",s.o.style.bottom="auto",s.setVelocities(),s.vCheck(),s.meltFrame=0,s.melting=!1,s.setOpacity(s.o,1),s.o.style.padding="0px",s.o.style.margin="0px",s.o.style.fontSize=s.fontSize+"px",s.o.style.lineHeight=f.flakeHeight+2+"px",s.o.style.textAlign="center",s.o.style.verticalAlign="baseline",s.x=parseInt(H(h-f.flakeWidth-20),10),s.y=parseInt(-1*H(c),10)-f.flakeHeight,s.refresh(),s.o.style.display="block",s.active=1},this.recycle(),this.refresh()},this.snow=function(){for(var e=0,t=null,i=0,s=f.flakes.length;i<s;i++)1===f.flakes[i].active&&(f.flakes[i].move(),e++),f.flakes[i].melting&&f.flakes[i].melt();e<f.flakesMaxActive&&0===(t=f.flakes[parseInt(H(f.flakes.length),10)]).active&&(t.melting=!0),f.timer&&n.getAnimationFrame(f.snow)},this.mouseMove=function(e){if(!f.followMouse)return!0;var t=parseInt(e.clientX,10);k=t<u?t/u*2-2:(t-=u)/u*2},this.createSnow=function(e,t){for(var i=0;i<e;i++)f.flakes[f.flakes.length]=new f.SnowFlake(parseInt(H(6),10)),(t||i>f.flakesMaxActive)&&(f.flakes[f.flakes.length-1].active=-1);f.targetElement.appendChild(b)},this.timerInit=function(){f.timer=!0,f.snow()},this.init=function(){for(var e=0;e<f.meltFrameCount;e++)f.meltFrames.push(1-e/f.meltFrameCount);f.randomizeWind(),f.createSnow(f.flakesMax),f.events.add(l,"resize",f.resizeHandler),f.events.add(l,"scroll",f.scrollHandler),f.freezeOnBlur&&(t?(f.events.add(o,"focusout",f.freeze),f.events.add(o,"focusin",f.resume)):(f.events.add(l,"blur",f.freeze),f.events.add(l,"focus",f.resume))),f.resizeHandler(),f.scrollHandler(),f.followMouse&&f.events.add(t?o:l,"mousemove",f.mouseMove),f.animationInterval=Math.max(20,f.animationInterval),f.timerInit()},this.start=function(e){if(F){if(e)return!0}else F=!0;if("string"==typeof f.targetElement){var t=f.targetElement;if(f.targetElement=o.getElementById(t),!f.targetElement)throw new Error('Snowstorm: Unable to get targetElement "'+t+'"')}if(f.targetElement||(f.targetElement=o.body||o.documentElement),f.targetElement!==o.documentElement&&f.targetElement!==o.body&&(f.resizeHandler=f.resizeHandlerAlt,f.usePixelPosition=!0),f.resizeHandler(),f.usePositionFixed=f.usePositionFixed&&!m&&!f.flakeBottom,l.getComputedStyle)try{x="relative"===l.getComputedStyle(f.targetElement,null).getPropertyValue("position")}catch(e){x=!1}g=f.usePositionFixed,h&&c&&!f.disabled&&(f.init(),f.active=!0)},f.autoStart&&f.events.add(l,"load",function e(){f.excludeMobile&&i||M(),f.events.remove(l,"load",e)},!1),this}(window,document);
